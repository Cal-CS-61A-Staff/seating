{% extends 'base.html.j2' %}
{% import 'macros.html.j2' as macros with context %}

{% block body %}
<section class="students mdl-grid">
  <div class="mdl-cell mdl-cell--12-col">
    <h4>Students</h4>
    <table id="student-table" class="mdl-data-table mdl-js-data-table mdl-shadow--2dp">
      <thead>
        <tr>
          <th class="sort mdl-data-table__cell--non-numeric" data-sort="name">Name</th>
          <th class="sort mdl-data-table__cell--non-numeric" data-sort="email">Email</th>
          <th class="sort" data-sort="sid">Student ID</th>
          <th class="sort mdl-data-table__cell--non-numeric" data-sort="assignment">Seat</th>
        </tr>
      </thead>
      <tbody class="list">
        {% for student in exam.students %}
        <tr>
          <td class="mdl-data-table__cell--non-numeric">
            <a class="name" href="{{ url_for('student', exam=exam, email=student.email) }}">
              {{ student.name|title }}
            </a>
          </td>
          <td class="email mdl-data-table__cell--non-numeric">{{ student.email }}</td>
          <td class="sid">{{ student.sid }}</td>
          <td class="mdl-data-table__cell--non-numeric">
          {% if student.assignment %}
            {% set seat = student.assignment.seat %}
            <a class="assignment" href="url_for('room', exam=exam, name=seat.room.display_name, seat=seat.name)">
              {{ seat.room.display_name }} {{ seat.name }}
            </a>
          {% else %}
            <span class="assignment">&mdash;</span>
          {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>
<script src="//cdnjs.cloudflare.com/ajax/libs/list.js/1.5.0/list.min.js"></script>
<script>
var options = {
  valueNames: ['name', 'email', 'sid', 'assignment']
};

var studentTable = new List('student-table', options);
studentTable.sort('name');
</script>
{% endblock %}
